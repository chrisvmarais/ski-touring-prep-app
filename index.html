<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ski Touring Prep Training</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .workout-card { cursor: pointer; transition: all 0.2s; }
        .workout-card:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        .completed { background-color: #f0f9ff; border-color: #22c55e; }
        .modal { backdrop-filter: blur(4px); }
    </style>
</head>
<body class="bg-gray-50">
    <div id="app" class="max-w-4xl mx-auto p-6 min-h-screen">
        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-3xl font-bold text-gray-800 mb-2">Ski Touring Prep Training</h1>
                    <p class="text-gray-600">Cascade Endurance ‚Ä¢ 100mile Kyle ‚Ä¢ Mountainfit</p>
                </div>
                <div class="text-4xl">üéø</div>
            </div>
            <div class="mt-4 flex items-center justify-between flex-wrap gap-2">
                <div class="flex items-center space-x-4">
                    <div id="phase-badge" class="bg-blue-500 text-white px-4 py-2 rounded-full text-sm font-medium">Week 1</div>
                    <div id="completion-rate" class="text-sm text-gray-600">Completion: 0%</div>
                </div>
                <button onclick="resetProgress()" class="text-xs text-gray-500 hover:text-gray-700 underline">Reset Progress</button>
            </div>
        </div>

        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-xl font-semibold">Training Week</h2>
                <div class="flex space-x-2">
                    <button onclick="changeWeek(-1)" class="px-3 py-1 bg-gray-200 rounded hover:bg-gray-300">Previous</button>
                    <span id="current-week" class="px-4 py-1 bg-blue-100 rounded font-medium">Week 1</span>
                    <button onclick="changeWeek(1)" class="px-3 py-1 bg-gray-200 rounded hover:bg-gray-300">Next</button>
                </div>
            </div>
            <div id="phase-description" class="text-sm text-gray-600"></div>
        </div>

        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
            <h3 class="text-xl font-semibold mb-4">This Week's Training</h3>
            <div id="workout-grid" class="grid gap-4 md:grid-cols-2 lg:grid-cols-3"></div>
        </div>

        <div class="bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg shadow-lg p-6 mb-6">
            <div class="flex items-center justify-between mb-3">
                <div class="flex items-center space-x-2">
                    <span class="text-2xl">üåô</span>
                    <h3 class="text-xl font-semibold text-gray-800">Nightly Mobility Routine</h3>
                </div>
                <button onclick="openNightlyMobility()" class="px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 text-sm">View Routine</button>
            </div>
            <p class="text-sm text-gray-600">5-10 minute routine to do every evening before bed</p>
        </div>
    </div>

    <div id="modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center p-4 z-50 modal">
        <div class="bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 id="modal-title" class="text-2xl font-bold text-gray-800"></h3>
                    <button onclick="closeModal()" class="text-gray-500 hover:text-gray-700 text-2xl font-bold">√ó</button>
                </div>
                <div id="modal-content"></div>
                <div class="flex justify-between items-center pt-4 border-t mt-6 flex-wrap gap-2">
                    <button onclick="closeModal()" class="px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300">Close</button>
                    <div class="flex space-x-2">
                        <button id="add-to-calendar-btn" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm">üìÖ Add to Calendar</button>
                        <button id="complete-btn" class="px-6 py-2 bg-green-600 text-white rounded hover:bg-green-700">Mark Complete ‚úì</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentWeek = 1;
        let completedWorkouts = new Set();
        let selectedWorkout = null;

        const nightlyMobility = {
            duration: "5-10 minutes",
            description: "Do this every evening before bed",
            routine: [
                { name: "Hip Sequence", exercises: ["90/90 hip stretch: 45sec each side", "Figure-4 stretch: 30sec each side", "Hip circles: 5 each direction"] },
                { name: "Shoulder & Upper Back", exercises: ["Doorway pec stretch: 30sec each side", "Thread the needle: 30sec each side", "Shoulder circles: 10 forward, 10 back"] },
                { name: "Lower Body", exercises: ["Standing quad stretch: 30sec each leg", "Calf stretch: 30sec each leg", "Seated forward fold: 45sec"] },
                { name: "Finish", exercises: ["Gentle spinal twists: 5 each side", "Deep breathing: 5 slow breaths", "Body scan relaxation: 1min"] }
            ]
        };

        function loadSavedData() {
            try {
                const w = localStorage.getItem('skiTouringCurrentWeek');
                const c = localStorage.getItem('skiTouringCompletedWorkouts');
                if (w) currentWeek = parseInt(w);
                if (c) completedWorkouts = new Set(JSON.parse(c));
            } catch (e) {}
        }

        function saveData() {
            try {
                localStorage.setItem('skiTouringCurrentWeek', currentWeek.toString());
                localStorage.setItem('skiTouringCompletedWorkouts', JSON.stringify([...completedWorkouts]));
            } catch (e) {}
        }

        function getPhase(week) {
            if (week <= 4) return { name: "Base Building (Gym Focus)", color: "bg-blue-500", description: "Building strength, aerobic base, and movement quality in the gym" };
            if (week <= 12) return { name: "Ski Season Training", color: "bg-green-500", description: "3-4 ski days per week with 1 gym session to maintain strength" };
            return { name: "Peak Season", color: "bg-purple-500", description: "Full ski touring mode with maintenance strength work" };
        }

        const workouts = {
            base: {
                Monday: { type: 'Rest & Mobility', workout: 'Rest Day Recovery + Hip/Ankle Mobility', duration: 30,
                    warmup: "5min gentle walk to warm tissues",
                    main: ["Hip Mobility: 90/90 stretches 2x60sec, Pigeon 2x60sec, Hip circles 10 each, Frog stretch 2x45sec, Couch stretch 2x60sec", "Ankle Mobility: Circles 20 each direction, Straight calf stretch 3x30sec, Bent knee calf stretch 3x30sec", "Foam rolling: IT band, quads, calves (8min)", "Spinal twists: 5 each direction"],
                    cooldown: "5min deep breathing, complete relaxation, mental preparation for week" },
                Tuesday: { type: 'Gym Training', workout: 'Step-ups + Pull-ups + Single-leg Foundation', duration: 75,
                    warmup: "15min: 2min march ‚Üí 20 arm circles each ‚Üí 15 leg swings each leg (front/back & side) ‚Üí 10 walking lunges with overhead reach ‚Üí 10 side squats with curtsy lunge each ‚Üí 10 bodyweight squats (pause at bottom) ‚Üí 15 lateral hops (5 each direction) ‚Üí 10 easy step-ups each leg ‚Üí 5 inchworms ‚Üí 30sec jumping jacks",
                    main: ["Weighted step-ups 18-24\": 3x12 each leg (10-15lb pack)", "Pull-ups or assisted: 4x5-8 reps", "Single-leg glute bridges: 3x10 each", "Bulgarian split squats: 3x8 each leg", "Plank: 3x30-45sec", "Face pulls: 2x15", "Single-leg balance: 2x30sec each leg"],
                    cooldown: "15min: Hip flexor stretch 2x45sec each, Quad stretch 2x30sec each, Hamstring 2x30sec each, Calf 2x30sec each, Upper back/lat 2x30sec each, Shoulder circles 10 each, 5min foam rolling (quads, IT band, calves), Deep breathing 2min" },
                Wednesday: { type: 'Trail Run', workout: 'Skinning Pace Base Build', duration: 75,
                    warmup: "20min: 5min flat easy walk/jog ‚Üí 3min slight incline ‚Üí 10 side squats with curtsy lunge ‚Üí 15 lateral hops ‚Üí 2min moderate incline ‚Üí 5 dynamic leg swings each ‚Üí 3min conversation pace ‚Üí 5 high knees + 5 butt kicks ‚Üí 2min target skinning pace",
                    main: ["60min steady trail run (uphill focus)", "Nose breathing only - conversational pace", "Skinning rhythm: 60-70 steps/min", "Efficient uphill technique", "Mental focus: sustainable forever pace"],
                    cooldown: "15min: 5min easy walk ‚Üí Standing quad stretch 45sec each ‚Üí Hip flexor lunge 45sec each ‚Üí Calf 30sec each ‚Üí Hamstring 45sec each ‚Üí Figure-4 hip 30sec each ‚Üí Ankle circles 10 each ‚Üí Spinal twists 5 each ‚Üí Deep breathing 2min" },
                Thursday: { type: 'Gym Training', workout: 'Jump Prep + Eccentric Loading + Rows', duration: 70,
                    warmup: "15min: 2min easy walk ‚Üí 20 arm swings each ‚Üí 10 bodyweight squats ‚Üí 10 walking lunges each ‚Üí 10 side squats with curtsy lunge each ‚Üí 15 calf raises ‚Üí 15 lateral hops (soft landing) ‚Üí 10 small vertical hops ‚Üí 10 easy step-ups each ‚Üí 5 box touches (landing mechanics) ‚Üí 30sec light marching",
                    main: ["Box steps (controlled): 3x8 each leg", "Eccentric squats (3sec down): 3x8", "Bent-over rows: 3x10", "Nordic curls (assisted): 3x3-5", "Jump prep: Small hops 2x10", "Overhead press: 3x8", "Side plank: 2x20-30sec each"],
                    cooldown: "15min: Quad stretch 2x45sec each, Hamstring 2x45sec each, Hip flexor 2x30sec each, Shoulder/chest doorway 2x45sec each, Lat 2x30sec each, Thoracic rotation 2x30sec each, Foam roll legs 5min, Deep breathing 2min" },
                Friday: { type: 'Optional Run', workout: 'Optional Easy Run + Mobility', duration: 60,
                    warmup: "If running: 10min easy progressive build. If mobility: 5min gentle movement",
                    main: ["OPTION A: 35min easy recovery run (Zone 1) + 15min mobility", "OPTION B: 50min comprehensive mobility session", "Hip Protocol: Couch stretch 2x60sec, Pigeon 2x60sec, 90/90 transitions 10 reps, Frog 2x60sec", "Shoulder Protocol: Wall slides 3x10, Doorway pec 2x60sec, Band pull-aparts 3x15, Thread needle 2x30sec"],
                    cooldown: "10min: Full body stretching sequence, Focus on tight areas, Deep breathing, Mental prep for weekend" },
                Saturday: { type: 'Long Adventure', workout: 'Long Trail Run/Hike', duration: 180,
                    warmup: "20min with pack: 5min flat easy ‚Üí 5min slight incline ‚Üí 10 dynamic movements (lunges, squats, leg swings) ‚Üí 5min moderate incline to target pace ‚Üí 5min sustained aerobic pace",
                    main: ["3-4hr continuous trail running/hiking with pack", "Pack: Week 1-2: 10-15lbs, Week 3-4: 15-20lbs", "Mix terrain: sustained uphills, flats, technical sections", "Practice nutrition every 45-60min (real food + gels)", "Practice hydration strategy", "Sustainable pacing - could maintain all day", "Mental training: stay present and positive"],
                    cooldown: "20min: 5min easy walking ‚Üí Full leg stretching (quads, hammies, calves, hip flexors, glutes) 10min ‚Üí Upper body (shoulders, back, chest) 3min ‚Üí Gentle movement ‚Üí Refueling within 30min (protein + carbs)" },
                Sunday: { type: 'Recovery', workout: 'Optional Easy + Deep Recovery', duration: 60,
                    warmup: "If moving: 5min very easy. If recovery: gentle assessment",
                    main: ["OPTION A: 30-45min very easy recovery movement + 30min recovery protocol", "OPTION B: 60min full recovery protocol (no running)", "Deep recovery: Foam rolling 15min (all major groups), Static stretching 15min (hold 60sec+), Gentle movement flow 10min", "Focus on tissue quality and mental recovery"],
                    cooldown: "Complete rest, hydration, nutrition focus, prepare for training week" }
            },
            ski: {
                Monday: { type: 'Rest & Mobility', workout: 'Rest Day Recovery', duration: 30,
                    warmup: "Light movement assessment",
                    main: ["Gentle mobility flow: 20min", "Focus on hips, ankles, shoulders", "Foam rolling as needed", "Mental recovery"],
                    cooldown: "Deep breathing, complete rest" },
                Tuesday: { type: 'Ski Day', workout: 'Ski Tour - Moderate Effort', duration: 180,
                    warmup: "5min out of car: Arm swings 10 each, Leg swings 10 each leg, Walking lunges 10, Side squats 10, Quick hop test 5, Put skins on and start skinning easy",
                    main: ["2-4hr ski tour with moderate effort", "Focus on efficient skinning technique", "Practice kick turns and transitions", "Sustainable pace throughout", "Nutrition and hydration practice"],
                    cooldown: "Easy skiing back, quick stretch if cold, proper refueling" },
                Wednesday: { type: 'Gym Training', workout: 'Maintenance Strength Session', duration: 60,
                    warmup: "10min: Easy movement, Joint mobility, Side squats with curtsy lunge 8 each, Lateral hops 10, Dynamic prep",
                    main: ["Weighted step-ups: 3x8 each leg (20-25lb)", "Pull-ups: 3x6-8", "Single-leg deadlifts: 3x6 each", "Overhead press: 3x8", "Face pulls: 2x15", "Core work: 3x30sec planks"],
                    cooldown: "10min: Quick full-body stretch, Focus on skiing muscles" },
                Thursday: { type: 'Ski Day', workout: 'Ski Tour - Tempo Effort', duration: 180,
                    warmup: "5min out of car: Quick dynamic movements, Arm/leg swings, Squats and lunges, Start skinning very easy then build",
                    main: ["2-4hr ski tour with tempo sections", "Include 3-5 √ó 10min tempo efforts while skinning", "Practice efficient technique under load", "Moderate to hard effort on uphills", "Recovery pace between efforts"],
                    cooldown: "Easy ski down, refuel immediately" },
                Friday: { type: 'Optional Ski', workout: 'Optional Easy Ski + Mobility', duration: 90,
                    warmup: "Quick dynamic warm-up if skiing",
                    main: ["OPTION A: 1-2hr easy ski tour + mobility", "OPTION B: Full rest day with comprehensive mobility", "Focus on recovery for weekend"],
                    cooldown: "Mobility and relaxation" },
                Saturday: { type: 'Long Ski Day', workout: 'Long Ski Tour', duration: 300,
                    warmup: "5-10min: Full body dynamic movements, Practice with pack, Start skinning very easy and progressive",
                    main: ["4-6hr ski tour with full pack", "Simulate real touring day", "Include transitions, kick turns, technical sections", "Practice descents on varied terrain", "Real-world pacing and nutrition", "Mental training: long day focus"],
                    cooldown: "Easy skin/ski back, immediate refueling, gentle stretching once warm" },
                Sunday: { type: 'Ski Day', workout: 'Recovery Ski or Rest', duration: 120,
                    warmup: "Light dynamic warm-up",
                    main: ["OPTION A: 1-2hr easy recovery ski tour", "OPTION B: Complete rest day", "Very easy pace if skiing", "Focus on technique and enjoyment"],
                    cooldown: "Comprehensive recovery protocol" }
            }
        };

        function generateSchedule(week) {
            const base = week <= 4 ? workouts.base : workouts.ski;
            const schedule = [];
            Object.entries(base).forEach(([day, w]) => {
                const workout = {...w, day};
                if (day === 'Saturday' && week <= 4) {
                    workout.duration = 180 + (week * 20);
                    workout.main[0] = `${3 + week * 0.25}hr continuous trail with ${10 + (week * 2.5)}lb pack`;
                }
                if (day === 'Saturday' && week >= 8) {
                    workout.duration = 360;
                    workout.main[0] = "5-7hr ski tour with full touring objectives";
                }
                schedule.push(workout);
            });
            return schedule;
        }

        function getIcon(type) {
            const icons = { 'Rest & Mobility': 'üßò‚Äç‚ôÇÔ∏è', 'Gym Training': 'üí™', 'Trail Run': 'üèÉ‚Äç‚ôÇÔ∏è', 'Optional Run': 'ü§∏‚Äç‚ôÇÔ∏è', 'Long Adventure': '‚õ∞Ô∏è', 'Recovery': 'üòå', 'Ski Day': '‚õ∑Ô∏è', 'Long Ski Day': 'üéø', 'Optional Ski': '‚ùÑÔ∏è' };
            return icons[type] || 'üéø';
        }

        function renderWorkouts() {
            const schedule = generateSchedule(currentWeek);
            const grid = document.getElementById('workout-grid');
            grid.innerHTML = schedule.map(w => {
                const id = `${currentWeek}-${w.day}`;
                const done = completedWorkouts.has(id);
                return `<div class="workout-card border rounded-lg p-4 ${done ? 'completed border-green-200' : 'border-gray-200'}" onclick="openModal('${w.day}')">
                    <div class="flex items-center justify-between mb-3">
                        <div class="flex items-center space-x-2"><span class="text-lg">${getIcon(w.type)}</span><span class="font-medium text-gray-700">${w.day}</span></div>
                        <button onclick="toggleCompletion(event, '${id}')" class="text-green-600 hover:text-green-700">${done ? '‚úÖ' : '‚≠ï'}</button>
                    </div>
                    <h4 class="font-semibold text-gray-800 mb-2">${w.workout}</h4>
                    <p class="text-sm text-gray-600 mb-3">${w.type}</p>
                    <div class="flex items-center text-sm text-gray-500 mb-4"><span class="mr-1">‚è±Ô∏è</span>${w.duration} min</div>
                    <div class="mt-4 pt-3 border-t border-gray-200"><div class="flex items-center justify-center space-x-2 text-blue-600 font-medium"><span>‚ñ∂Ô∏è</span><span>Tap for Full Details</span></div></div>
                </div>`;
            }).join('');
        }

        function toggleCompletion(e, id) {
            e.stopPropagation();
            completedWorkouts.has(id) ? completedWorkouts.delete(id) : completedWorkouts.add(id);
            saveData();
            updateUI();
        }

        function changeWeek(d) {
            currentWeek = Math.max(1, currentWeek + d);
            saveData();
            updateUI();
        }

        function resetProgress() {
            if (confirm('Reset all progress?')) {
                currentWeek = 1;
                completedWorkouts.clear();
                saveData();
                updateUI();
            }
        }

        function openModal(day) {
            const schedule = generateSchedule(currentWeek);
            selectedWorkout = schedule.find(w => w.day === day);
            if (!selectedWorkout) return;
            
            document.getElementById('modal-title').textContent = `${day} - ${selectedWorkout.workout}`;
            document.getElementById('modal-content').innerHTML = `
                <div class="flex items-center space-x-4 text-sm text-gray-600 mb-6">
                    <div><span class="mr-1">‚è±Ô∏è</span>${selectedWorkout.duration} min</div>
                    <div><span class="mr-1">${getIcon(selectedWorkout.type)}</span>${selectedWorkout.type}</div>
                </div>
                <div class="bg-blue-50 p-4 rounded-lg mb-6"><h4 class="font-semibold text-blue-800 mb-2">Warm-up</h4><p class="text-blue-700 whitespace-pre-line">${selectedWorkout.warmup}</p></div>
                <div class="bg-orange-50 p-4 rounded-lg mb-6"><h4 class="font-semibold text-orange-800 mb-3">Main Workout</h4><div class="space-y-1 text-orange-700">${selectedWorkout.main.map(e => `<div>${e}</div>`).join('')}</div></div>
                <div class="bg-green-50 p-4 rounded-lg"><h4 class="font-semibold text-green-800 mb-2">Cool-down</h4><p class="text-green-700">${selectedWorkout.cooldown}</p></div>
            `;
            document.getElementById('complete-btn').style.display = 'block';
            document.getElementById('complete-btn').onclick = () => markCompleteAndClose(day);
            document.getElementById('add-to-calendar-btn').onclick = () => addToCalendar(day, selectedWorkout);
            document.getElementById('modal').classList.remove('hidden');
            document.getElementById('modal').classList.add('flex');
        }

        function closeModal() {
            document.getElementById('modal').classList.add('hidden');
            document.getElementById('modal').classList.remove('flex');
        }

        function markCompleteAndClose(day) {
            const id = `${currentWeek}-${day}`;
            completedWorkouts.has(id) ? completedWorkouts.delete(id) : completedWorkouts.add(id);
            saveData();
            updateUI();
            closeModal();
        }

        function openNightlyMobility() {
            selectedWorkout = null;
            document.getElementById('modal-title').textContent = 'üåô Nightly Mobility Routine';
            let content = `<div class="mb-6"><div class="bg-purple-50 p-4 rounded-lg mb-4"><p class="text-purple-800 font-medium">‚è±Ô∏è ${nightlyMobility.duration}</p><p class="text-purple-700 text-sm mt-2">${nightlyMobility.description}</p></div></div>`;
            nightlyMobility.routine.forEach((s, i) => {
                const colors = ['blue', 'green', 'orange', 'purple'];
                const c = colors[i % 4];
                content += `<div class="bg-${c}-50 p-4 rounded-lg mb-4"><h4 class="font-semibold text-${c}-800 mb-2">${s.name}</h4><div class="space-y-1">${s.exercises.map(ex => `<div class="text-${c}-700 text-sm">‚Ä¢ ${ex}</div>`).join('')}</div></div>`;
            });
            document.getElementById('modal-content').innerHTML = content;
            document.getElementById('complete-btn').style.display = 'none';
            document.getElementById('add-to-calendar-btn').onclick = () => addNightlyMobilityToCalendar();
            document.getElementById('modal').classList.remove('hidden');
            document.getElementById('modal').classList.add('flex');
        }

        function addToCalendar(day, w) {
            const today = new Date();
            const dayIndex = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'].indexOf(day);
            let daysUntil = dayIndex - today.getDay();
            if (daysUntil <= 0) daysUntil += 7;
            const date = new Date();
            date.setDate(today.getDate() + daysUntil);
            const times = { 'Rest & Mobility': {h:9,m:0}, 'Gym Training': {h:18,m:0}, 'Trail Run': {h:7,m:0}, 'Optional Run': {h:17,m:0}, 'Long Adventure': {h:8,m:0}, 'Recovery': {h:10,m:0}, 'Ski Day': {h:8,m:0}, 'Long Ski Day': {h:7,m:0}, 'Optional Ski': {h:10,m:0} };
            const t = times[w.type] || {h:9,m:0};
            date.setHours(t.h, t.m, 0, 0);
            const end = new Date(date);
            end.setMinutes(end.getMinutes() + w.duration);
            const fmt = d => d.toISOString().replace(/[-:]/g, '').split('.')[0] + 'Z';
            const url = `https://calendar.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(`${day}: ${w.workout}`)}&dates=${fmt(date)}/${fmt(end)}&details=${encodeURIComponent(`Week ${currentWeek}\\n\\n${w.warmup}\\n\\n${w.main.join('\\n')}\\n\\n${w.cooldown}`)}`;
            window.open(url, '_blank');
        }

        function addNightlyMobilityToCalendar() {
            const today = new Date();
            today.setHours(21, 0, 0, 0);
            const end = new Date(today);
            end.setMinutes(end.getMinutes() + 10);
            const fmt = d => d.toISOString().replace(/[-:]/g, '').split('.')[0] + 'Z';
            const desc = nightlyMobility.routine.map(s => `${s.name}:\\n${s.exercises.join('\\n')}`).join('\\n\\n');
            const url = `https://calendar.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent('Nightly Mobility Routine')}&dates=${fmt(today)}/${fmt(end)}&details=${encodeURIComponent(desc)}&recur=RRULE:FREQ=DAILY`;
            window.open(url, '_blank');
        }

        function updateUI() {
            const phase = getPhase(currentWeek);
            document.getElementById('current-week').textContent = `Week ${currentWeek}`;
            document.getElementById('phase-badge').textContent = `Week ${currentWeek}: ${phase.name}`;
            document.getElementById('phase-badge').className = `${phase.color} text-white px-4 py-2 rounded-full text-sm font-medium`;
            document.getElementById('phase-description').textContent = phase.description;
            const schedule = generateSchedule(currentWeek);
            const done = schedule.filter(w => completedWorkouts.has(`${currentWeek}-${w.day}`)).length;
            const rate = Math.round((done / schedule.length) * 100);
            document.getElementById('completion-rate').textContent = `Completion: ${rate}%`;
            renderWorkouts();
        }

        loadSavedData();
        updateUI();
    </script>
</body>
</html>
